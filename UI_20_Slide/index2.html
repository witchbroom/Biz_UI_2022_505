<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>나의 홈페이지</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            width: 100vw;
            height: 100vh;
        }

        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        div.images {
            display: flex;
            height: 400px;
            transition: 1s;
        }

        div.images img {
            width: 600px;
        }

        div.image_window {
            width: 600px;
            height: 400px;
            overflow: hidden;
            position: relative;
        }

        div.btn_box {
            width: 600px;
            display: flex;
            position: absolute;
            left: 0;
            bottom: 0;
            padding: 30px 20px;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.6s;
        }

        div.btn_box:hover {
            opacity: 1;
        }

        div.badge {
            border: 1px solid white;
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        span.badge {
            background-color: #000;
            color: #fff;
            display: inline-block;
            border-radius: 50%;

            border: 2px solid white;
            width: 15px;
            height: 15px;
        }

        span.badge:hover {
            cursor: pointer;
            background-color: white;
        }

        button.btn {
            width: 100px;
            height: 30px;
            border: none;
            outline: none;
            color: white;
            background-color: transparent;
        }

        button.btn.prev {
            margin-right: auto;
        }

        button.btn.next {
            margin-left: auto;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const IMAGE_WIDTH = 600;
            const preBtn = document.querySelector("button.prev");
            const nextBtn = document.querySelector("button.next");
            const images = document.querySelector("div.images");

            // 화면 슬라이드되는 이미지 개수
            const imgCount = document.querySelectorAll("div.images img").length;

            let position = 0;
            let curPosition = 0;
            if (preBtn) {
                preBtn.addEventListener("click", () => {
                    if (curPosition > 0) {
                        position += IMAGE_WIDTH;
                        images.style.transform = `translateX(${position}px)`;
                        curPosition--;
                    }
                });
            }
            if (nextBtn) {
                nextBtn.addEventListener("click", () => {
                    if (curPosition < imgCount - 1) {
                        position -= IMAGE_WIDTH;
                        images.style.transform = `translateX(${position}px)`;
                        curPosition++;
                    }
                });
            } // end if nextBtn

            const badge_click_cb = (e, pos) => {
                console.log("badge index : ", pos);
                // 만약 3번 badge 클릭했다고 하면
                // -2 * IMAGE_WIDTH 가 계산되고
                // -1200
                // 현재위치가 3번인데 0을 클릭했다
                // transX는 0이 된다
                const transX = -pos * IMAGE_WIDTH;
                images.style.transform = `translateX(${transX}px)`;
            }

            // span.badge 를 감싸고있을 부모 tag(container)
            const divBadge = document.querySelector("div.badge");
            for (let i = 0; i < imgCount; i++) {
                // tag 를 JS 에서 동적으로 생성하기
                const span = document.createElement("span");
                // 생성된 span tag에 badge 클래스를 추가하고
                span.classList.add("badge");
                // 생성된 span tag 를 div.badge tag에 child로 추가하라
                divBadge.appendChild(span);
                span.addEventListener("click", (e) => {
                    badge.click_cb(e, i);
                });

            }


        }); // end document.addEvent("DOMContentLoaded")
    </script>
</head>

<body>
    <div class="image_window">
        <div class="images">
            <img src="images/image(1).jpg" />
            <img src="images/image(2).jpg" />
            <img src="images/image(3).jpg" />
            <img src="images/image(4).jpg" />
            <img src="images/image(5).jpg" />
        </div>
        <div class="btn_box">
            <button class="btn prev">&#10094;</button>
            <div class="badge">
            </div>
            <button class="btn next">&#10095;</button>
        </div>
    </div>
</body>

</html>